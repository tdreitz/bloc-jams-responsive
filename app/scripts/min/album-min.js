var setSong=function(n){currentSoundFile&&currentSoundFile.stop(),currentlyPlayingSongNumber=parseInt(n),currentSongFromAlbum=currentAlbum.songs[n-1],currentSoundFile=new buzz.sound(currentSongFromAlbum.audioUrl,{formats:["mp3"],preload:!0});var t=function(n){currentSoundFile&&currentSoundFile.setVolume(n)};t(currentVolume),currentSoundFile.play()},getSongNumberCell=function(n){return $('.song-item-number[data-song-number="'+n+'"]')},createSongRow=function(n,t,e){var r='<tr class="album-view-song-item">  <td class="song-item-number" data-song-number="'+n+'">'+n+'</td>  <td class="song-item-title">'+t+'</td>  <td class="song-item-duration">'+e+"</td></tr>",u=$(r),l=function(){var n=$(this).find(".song-item-number"),t=n.attr("data-song-number"),e=function(){var n=$(".player-bar h2");n.eq(0).html(currentAlbum.artist+" â€“ "+currentSongFromAlbum.name),n.eq(1).html(currentSongFromAlbum.name),n.eq(2).html(currentAlbum.artist),$(".main-controls .play-pause").html(playerBarPauseButton)};if(null===currentlyPlayingSongNumber)n.html(pauseButtonTemplate),setSong(t),e();else if(currentlyPlayingSongNumber===parseInt(t))n.html(playButtonTemplate),currentSoundFile.isPaused()?currentSoundFile.play():currentSoundFile.pause(),$(".main-controls .play-pause").html(playerBarPlayButton);else if(currentlyPlayingSongNumber!==parseInt(t)){n.html(pauseButtonTemplate);var r=$('[data-song-number="'+currentlyPlayingSongNumber+'"]');r.html(currentlyPlayingSongNumber),setSong(t),e()}},a=function(){var n=$(this).find(".song-item-number"),t=parseInt(n.attr("data-song-number"));t!==currentlyPlayingSongNumber&&n.html(playButtonTemplate)},o=function(){var n=$(this).find(".song-item-number"),t=parseInt(n.attr("data-song-number"));t!==currentlyPlayingSongNumber&&n.html(t)};return u.click(l),u.hover(a,o),u},setCurrentAlbum=function(n){currentAlbum=n;var t=$(".album-view-title"),e=$(".album-view-artist"),r=$(".album-view-release-info"),u=$(".album-cover-art"),l=$(".album-view-song-list");t.text(n.name),e.text(n.artist),r.text(n.year),u.attr("src",n.albumArtUrl),l.empty();for(var a=0;a<n.songs.length;a++){var o=createSongRow(a+1,n.songs[a].name,n.songs[a].length);l.append(o)}},updateSeekPercentage=function(n,t){var e=100*t;e=Math.max(0,e),e=Math.min(100,e);var r=e+"%";n.find(".fill").width(r),n.find(".thumb").css({left:r})},setupSeekBars=function(){var n=$(".player-bar .seek-bar");n.click(function(n){var t=n.pageX-$(this).offset().left,e=$(this).width(),r=t/e;updateSeekPercentage($(this),r)}),n.find(".thumb").mousedown(function(n){var t=$(this).parent();$(document).bind("mousemove.thumb",function(n){var e=n.pageX-t.offset().left,r=t.width(),u=e/r;updateSeekPercentage(t,u)}),$(document).bind("mouseup.thumb",function(){$(document).unbind("mousemove.thumb"),$(document).unbind("mouseup.thumb")})})},trackIndex=function(n,t){return n.songs.indexOf(t)},nextSong=function(){if(null!==currentSongFromAlbum){var n=function(n){return 0===n?currentAlbum.songs.length:n},t=trackIndex(currentAlbum,currentSongFromAlbum);t++,console.log(t),t>=currentAlbum.songs.length&&(t=0),setSong(t+1),$(".currently-playing .song-name").text(currentSongFromAlbum.name),$(".currently-playing .artist-name").text(currentAlbum.artist),$(".currently-playing .artist-song-mobile").text(currentAlbum.artist+" - "+currentSongFromAlbum.name),$(".main-controls .play-pause").html(playerBarPauseButton);var e=n(t),r=getSongNumberCell(currentlyPlayingSongNumber),u=getSongNumberCell(e);r.html(pauseButtonTemplate),u.html(e)}},previousSong=function(){if(null!==currentlyPlayingSongNumber){var n=function(n){return n===currentAlbum.songs.length-1?1:n+2},t=trackIndex(currentAlbum,currentSongFromAlbum);console.log(t),t--,0>t&&(t=currentAlbum.songs.length-1),setSong(t+1),$(".currently-playing .song-name").text(currentSongFromAlbum.name),$(".currently-playing .artist-name").text(currentAlbum.artist),$(".currently-playing .artist-song-mobile").text(currentAlbum.artist+" - "+currentSongFromAlbum.name),$(".main-controls .play-pause").html(playerBarPauseButton);var e=n(t),r=getSongNumberCell(currentlyPlayingSongNumber),u=getSongNumberCell(e);r.html(pauseButtonTemplate),u.html(e)}},togglePlayFromPlayerBar=function(){currentSoundFile.isPaused()?(currentSoundFile.play(),$playPause.html(playerBarPauseButton),getSongNumberCell(currentlyPlayingSongNumber).html(pauseButtonTemplate)):(currentSoundFile.pause(),$playPause.html(playerBarPlayButton),getSongNumberCell(currentlyPlayingSongNumber).html(playButtonTemplate))},playButtonTemplate='<a class="album-song-button"><span class="ion-play"></span></a>',pauseButtonTemplate='<a class="album-song-button"><span class="ion-pause"></span></a>',playerBarPlayButton='<span class="ion-play"><span>',playerBarPauseButton='<span class="ion-pause"><span>',currentAlbum=null,currentlyPlayingSongNumber=null,currentSongFromAlbum=null,currentSoundFile=null,currentVolume=100,$previousButton=$(".main-controls .previous"),$nextButton=$(".main-controls .next"),$playPause=$(".main-controls .play-pause");$(document).ready(function(){setCurrentAlbum(albumPicasso),$previousButton.click(previousSong),$nextButton.click(nextSong),$playPause.click(togglePlayFromPlayerBar),setupSeekBars()});