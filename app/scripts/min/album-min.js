var setSong=function(n){currentSoundFile&&currentSoundFile.stop(),currentlyPlayingSongNumber=parseInt(n),currentSongFromAlbum=currentAlbum.songs[n-1],currentSoundFile=new buzz.sound(currentSongFromAlbum.audioUrl,{formats:["mp3"],preload:!0});var t=function(n){currentSoundFile&&currentSoundFile.setVolume(n)};t(currentVolume),currentSoundFile.play()},getSongNumberCell=function(n){return $('.song-item-number[data-song-number="'+n+'"]')},createSongRow=function(n,t,r){var e='<tr class="album-view-song-item">  <td class="song-item-number" data-song-number="'+n+'">'+n+'</td>  <td class="song-item-title">'+t+'</td>  <td class="song-item-duration">'+r+"</td></tr>",u=$(e),l=function(){var n=$(this).find(".song-item-number"),t=n.attr("data-song-number"),r=function(){var n=$(".player-bar h2");n.eq(0).html(currentAlbum.artist+" â€“ "+currentSongFromAlbum.name),n.eq(1).html(currentSongFromAlbum.name),n.eq(2).html(currentAlbum.artist),$(".main-controls .play-pause").html(playerBarPauseButton)};if(null===currentlyPlayingSongNumber)n.html(pauseButtonTemplate),setSong(t),r();else if(currentlyPlayingSongNumber===parseInt(t))n.html(playButtonTemplate),currentSoundFile.isPaused()?currentSoundFile.play():currentSoundFile.pause(),$(".main-controls .play-pause").html(playerBarPlayButton);else if(currentlyPlayingSongNumber!==parseInt(t)){n.html(pauseButtonTemplate);var e=$('[data-song-number="'+currentlyPlayingSongNumber+'"]');e.html(currentlyPlayingSongNumber),setSong(t),r()}},a=function(){var n=$(this).find(".song-item-number"),t=parseInt(n.attr("data-song-number"));t!==currentlyPlayingSongNumber&&n.html(playButtonTemplate)},o=function(){var n=$(this).find(".song-item-number"),t=parseInt(n.attr("data-song-number"));t!==currentlyPlayingSongNumber&&n.html(t)};return u.click(l),u.hover(a,o),u},setCurrentAlbum=function(n){currentAlbum=n;var t=$(".album-view-title"),r=$(".album-view-artist"),e=$(".album-view-release-info"),u=$(".album-cover-art"),l=$(".album-view-song-list");t.text(n.name),r.text(n.artist),e.text(n.year),u.attr("src",n.albumArtUrl),l.empty();for(var a=0;a<n.songs.length;a++){var o=createSongRow(a+1,n.songs[a].name,n.songs[a].length);l.append(o)}},trackIndex=function(n,t){return n.songs.indexOf(t)},nextSong=function(){var n=function(n){return 0===n?currentAlbum.songs.length:n},t=trackIndex(currentAlbum,currentSongFromAlbum);t++,t>=currentAlbum.songs.length&&(t=0),setSong(t+1),$(".currently-playing .song-name").text(currentSongFromAlbum.name),$(".currently-playing .artist-name").text(currentAlbum.artist),$(".currently-playing .artist-song-mobile").text(currentAlbum.artist+" - "+currentSongFromAlbum.name),$(".main-controls .play-pause").html(playerBarPauseButton);var r=n(t),e=getSongNumberCell(currentlyPlayingSongNumber),u=getSongNumberCell(r);e.html(pauseButtonTemplate),u.html(r),console.log(currentlyPlayingSongNumber,currentSongFromAlbum,currentSoundFile)},previousSong=function(){var n=function(n){return n===currentAlbum.songs.length-1?1:n+2},t=trackIndex(currentAlbum,currentSongFromAlbum);t--,0>t&&(t=currentAlbum.songs.length-1),setSong(t+1),$(".currently-playing .song-name").text(currentSongFromAlbum.name),$(".currently-playing .artist-name").text(currentAlbum.artist),$(".currently-playing .artist-song-mobile").text(currentAlbum.artist+" - "+currentSongFromAlbum.name),$(".main-controls .play-pause").html(playerBarPauseButton);var r=n(t),e=getSongNumberCell(currentlyPlayingSongNumber),u=getSongNumberCell(r);e.html(pauseButtonTemplate),u.html(r),console.log(currentlyPlayingSongNumber,currentSongFromAlbum,currentSoundFile)},playButtonTemplate='<a class="album-song-button"><span class="ion-play"></span></a>',pauseButtonTemplate='<a class="album-song-button"><span class="ion-pause"></span></a>',playerBarPlayButton='<span class="ion-play"><span>',playerBarPauseButton='<span class="ion-pause"><span>',currentAlbum=null,currentlyPlayingSongNumber=null,currentSongFromAlbum=null,currentSoundFile=null,currentVolume=100,$previousButton=$(".main-controls .previous"),$nextButton=$(".main-controls .next");$(document).ready(function(){setCurrentAlbum(albumPicasso),$previousButton.click(previousSong),$nextButton.click(nextSong)});